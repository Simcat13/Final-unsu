<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="notice">
	
	<!-- 등록 -->
	<!-- 시퀀스 생성 -->
	<select id="sequence" resultType="int">
		select notice_seq.nextval from dual
	</select>
	
	<insert id="save">
		insert into notice(
			NOTICE_NO, NOTICE_TITLE, NOTICE_CONTENT, 
			NOTICE_WDATE, NOTICE_VIEW_COUNT
		)
		values(
			#{noticeNo}, #{noticeTitle}, #{noticeContent},
			sysdate, #{noticeViewCount}
		)
	</insert>
	
	<!-- 목록 최신 작성부터 정렬-->
	<select id="list" resultType="NoticeDto">
		select * from notice order by notice_no desc
	</select>
	
	<!-- 키워드 검색 -->
	<select id="find" resultType="NoticeDto">
		select * from notice where notice_no = #{noticeNo}
	</select>
	
	<!-- 수정 -->
	<update id="edit">
		update notice
		<set>
			<if test="noticeTitle != null">
				notice_title = #{noticeTitle},
			</if>
			<if test="noticeContent != null">
				notice_content = #{noticeContent},
			</if>
			<if test="noticeViewCount != null">
				notice_view_count = #{noticeViewCount},
			</if>
			 notice_wdate = sysdate,
		</set>
		where notice_no = #{noticeNo}
	</update>
	
	<!-- 삭제 -->
	<delete id="delete">
		delete notice where notice_no = #{noticeNo}
	</delete>
	
	
	
</mapper>





